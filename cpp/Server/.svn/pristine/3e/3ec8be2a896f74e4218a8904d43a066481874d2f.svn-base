syntax = "proto3";
option optimize_for = SPEED;
option java_package = "com.dream.cube.tcp";
import "Common.proto";
/*
C++_TYPE	proto_TYPE
float		float
char*		string
bytes		string
int8		int32
int			int32
int16		int32
int32		int32
uint8		uint32
uint16		uint32
uint32		uint32
int64		int64
uint64		uint64
bool 		bool
string 		string
*/

/*
repeated	array
*/

/*
protoc --cpp_out=.  this.proto
*/

enum ePacketType
{
	eLuckType	= 0;
	eUniType	= 1;
	eDirectType	= 2;
	eLigntType	= 3;
	eJoinGroupType	= 4;
	eCommandImmediatelyType   = 5;
	eCommandUniImmediatelyType   = 6;
	eFixTimeType    = 7;
	eLocationType   = 8;	
	eCommandFixTimeType   = 9;
	eCommandUniFixTimeType   = 10;
}

//定时红包是否已经开始倒计时
enum ePacketFixType
{
        eStartType       = 0;
        eUnStartType     = 1; 
        eFinishType    	 = 2;   
        eExpType				 = 3;      
}
enum eRangeType
{
	eVisitorType= 0;
	eMemberType	= 1;
	eAllType	= 2;
}

enum eRangeGender
{
	eGenderAll		= 0;	//不限性别
	eGenderMale		= 1;	//仅男的
	eGenderFemale	= 2;	//仅女的
}

//Sub_Vchat_SendRedPacketReq = 4000, 用户发送红包请求
message CMDSendRedPacketReq
{
	uint32	userID			= 1;	//用户ID
	uint32	groupID			= 2;	//群ID
	ePacketType packetType  = 3;    //红包类型 0:幸运弹 1:普天同庆弹 2:定向弹 3:照明弹 5:定时红包 6:定位红包
	eRangeType	rangeType	= 4;	//领取范围类型 0:仅游客 1:仅成员 2:所有人
	uint32	dstUserID		= 5;	//定向红包对象userid
	uint32	packetNum		= 6;	//红包个数
	uint32	packetMoney		= 7;	//红包总金额(实际金额*100),只适用于随机手气红包
	uint32	perPacketMoney	= 8;	//单个红包金额,只适用于定额红包(实际金额*100)
	string	message			= 9;	//红包留言
	bool	privateType		= 10;	//是否私聊红包
	eRangeGender rangeGender = 11;	//性别领取范围
	uint32  fixtime         = 12;   //定时时间
	uint32  invalidTime     = 13;   //结束时间
	double	longitude				=14;		//经度
	double	latitude				=15;		//纬度
	string	location				=16;	  //红包位置
}

//Sub_Vchat_SendRedPacketResp = 4001, 用户发送红包反馈
message CMDSendRedPacketResp
{
	CMDErrCode errInfo	= 1;	//ERROR CODE  0-SUCCESS
	uint32	userID		= 2;	//用户ID
	uint32	groupID		= 3;	//群ID
	uint32	packetID	= 4;	//红包ID
	uint32	comboNum	= 5;	//红包连击数
	bool	privateType	= 6;	//是否私聊红包,等于request里的privateType
	uint32	comboTime	= 7;	//计算combo的时间
	ePacketType	packetType	= 8;	//红包类型 0:幸运弹 1:普天同庆弹 2:定向弹 3:照明弹
	double	longitude				=9;		//经度
	double	latitude				=10;		//纬度
}

//Sub_Vchat_CatchRedPacketReq = 4002, 用户抢红包请求
message CMDCatchRedPacketReq
{
	uint32	userID		= 1;	//用户ID
	uint32	groupID		= 2;	//群ID
	uint32	packetID	= 3;	//红包ID
	double	longitude				=4;		//经度
	double	latitude				=5;		//纬度
}

//Sub_Vchat_CatchRedPacketResp = 4003, 用户抢红包反馈
message CMDCatchRedPacketResp
{
	CMDErrCode errInfo		= 1;	//ERROR CODE  0-SUCCESS
	uint32	userID			= 2;	//用户ID
	uint32	groupID			= 3;	//群ID
	uint32	packetID		= 4;	//红包ID
	UserInfo_t srcUser		= 5;	//红包发起者信息
	UserInfo_t	dstUser		= 6;	//定向红包对象信息
	ePacketType	packetType	= 7;	//红包类型 0:幸运弹 1:普天同庆弹 2:定向弹 3:照明弹
	eRangeType	rangeType	= 8;	//领取范围类型 0:仅游客 1:仅成员 2:所有人
	uint32	packetNum		= 9;	//红包个数
	uint32	packetMoney		= 10;	//红包总金额(实际金额*100)
	string	message			= 11;	//红包留言
	bool	privateType		= 12;	//是否私聊红包
	uint32  fixTime		= 13;    //定时红包生效时间
	uint32  diffTime	= 14;    //定时距离生效时间时间差
}

//Sub_Vchat_TakeRedPacketReq = 4004, 用户领取红包请求
message CMDTakeRedPacketReq
{
	uint32	userID		= 1;	//用户ID
	uint32	groupID		= 2;	//群ID
	uint32	packetID	= 3;	//红包ID
	string	photoPath	= 4;	//照片红包图片地址(服务器不关注,客户端协议层需要)
	double	longitude				=5;		//经度
	double	latitude				=6;		//纬度
	string	message			= 7;	//红包留言
}

//Sub_Vchat_TakeRedPacketResp = 4005, 用户领取红包反馈
message CMDTakeRedPacketResp
{
	CMDErrCode errInfo	= 1;	//ERROR CODE  0-SUCCESS
	uint32	userID		= 2;	//用户ID
	uint32	packetID	= 3;	//红包ID
	uint32	money		= 4;	//红包金额
	bool	privateType	= 5;	//是否私聊红包
//	UserInfo_t srcUser		= 6;	//红包发起者信息
//	UserInfo_t	dstUser		= 7;	//定向红包对象信息
	ePacketType	packetType	= 8;	//红包类型 0:幸运弹 1:普天同庆弹 2:定向弹 3:照明弹
	eRangeType	rangeType	= 9;	//领取范围类型 0:仅游客 1:仅成员 2:所有人
	uint32	packetNum		= 10;	//红包个数
	uint32	packetMoney		= 11;	//红包总金额(实际金额*100)
	string	message			= 12;	//红包留言
	uint32  fixTime		= 13;    //定时红包生效时间
	uint32  diffTime	= 14;    //定时距离生效时间时间差
}

//Sub_Vchat_QryRedPacketInfoReq = 4006; //查询红包信息(包括领取情况)
message CMDQryRedPacketInfoReq
{
	uint32 userID			= 1;	//用户ID
	uint32 groupID			= 2;	//群ID
	uint32 packetID			= 3;	//红包ID
	uint32 offset			= 4;	//偏移量
	uint32 count			= 5;	//请求数量
}

message CMDRedPacketTakenRes
{
	uint32	userID		= 1;	//用户ID
	string	alias		= 2;	//用户昵称
	string	head		= 3;	//用户头像
	uint32	money		= 4;	//该用户领取到的红包金额(实际金额*100)
	uint32  takeTime	= 5;	//领红包时间
}

//Sub_Vchat_RedPacketInfo = 4007, 红包领取情况列表
message CMDRedPacketInfo
{
	uint32 packetID			= 1;	//红包ID
	ePacketType	packetType	= 2;	//红包类型 0:幸运弹 1:普天同庆弹 2:定向弹 3:照明弹
	eRangeType	rangeType	= 3;	//领取范围类型 0:仅游客 1:仅成员 2:所有人
	UserInfo_t  srcUser		= 4;	//发红包用户信息
	UserInfo_t	dstUser		= 5;	//定向红包对象信息
	uint32	packetNum		= 6;	//红包个数
	uint32	takenNum		= 7;	//领取个数
	uint32	packetMoney		= 8;	//红包总金额(实际金额*100)
	uint32	takenMoney		= 9;	//已领取金额(实际金额*100)
	uint32	myTakeMoney		= 10;	//本人领取金额(实际金额*100)
	string	message			= 11;	//红包留言
	uint32  createTime		= 12;	//红包时间
	uint32  offset			= 13;   //最大偏移量，下拉请求时使用Sub_Vchat_QryRedPacketInfoReq
	repeated CMDRedPacketTakenRes res = 14; //红包领取列表
	uint32	finishCostTime	= 15;	//红包领完耗时
	uint32	topUserID		= 16;	//最佳手气用户ID
}

//Sub_Vchat_QryJoinGroupPacketReq = 4008, 查询是否需要入群红包请求
//Sub_Vchat_QryJoinGroupPacketResp = 4009, 查询是否入群红包反馈

message CMDWeekListRes
{
	uint32	userID		= 1;	//用户ID
	string	alias		= 2;	//用户昵称
	string	head		= 3;	//用户头像
	uint32	contributeValue	= 4;	//该用户周贡献值、魅力值
}

//Sub_Vchat_WeekCharmNotify = 4009, 魅力周榜推送
//Sub_Vchat_WeekContributeNotify = 4010, 贡献周榜推送
message CMDWeekListNotify
{
	uint32 groupID				= 1;	//群ID
	repeated CMDWeekListRes res	= 2;	//贡献周榜列表
}

//Sub_Vchat_QryWeekListReq = 4011, 贡献、魅力周榜查询
message CMDQryWeekListReq
{
	uint32 groupID				= 1;	//群ID
}

//Sub_Vchat_QryRedPacketReq = 4012, 根据类型查询查询红包
message CMDQryRedPacketReq
{
	uint32  groupID		= 1;    //群ID	
	ePacketType packetType  = 2;    //红包类型 0:幸运弹 1:普天同庆弹 2:定向弹 3:照明弹 5:定时红包
	uint32 count   		= 3;    //每次查询记录数
	uint32 offset		= 4;      //偏移量
	ePacketFixType fixType	= 5;     //0,已经到时开抢的记录 1,未到开抢时间的记录 2,已抢完 3,已过期
	uint32  userID		= 6;     //用户ID   
	uint64  clienttimestamp	=7;			//客户端发包时间
}

message CMDRedPacket
{    
	uint32  userID		= 1;     //用户ID   
	uint32  packetID	= 2;    //红包ID
	ePacketType packetType  = 3;    //红包类型 0:幸运弹 1:普天同庆弹 2:定向弹 3:照明弹 5:定时红包
	uint32  fixTime		= 4;    //定时红包生效时间
	uint32  diffTime	= 5;    //定时距离生效时间时间差
	uint32  packetMoney     = 6;    //红包总金额(实际金额*100)
	eRangeType  rangeType   = 7;    //领取范围类型 0:仅游客 1:仅成员 2:所有人
	uint32  packetNum	= 8;    //红包个数
	eRangeGender rangeGender = 9;    //性别领取范围
	string  message		= 10;   //红包留言
	ePacketFixType fixType	= 11;     //0,已经到时开抢的记录 1,未到开抢时间的记录 2,已抢完 3,已过期
	double	longitude				=12;		//经度
	double	latitude				=13;		//纬度
}

//Sub_Vchat_QryRedPacketRsp = 4013, 返回红包查询列表
message CMDQryRedPacketRsp
{
	uint32  groupID				= 1;	//群ID	
	uint32  offset				= 2;	//偏移量
	repeated CMDRedPacket rsp	= 3;	//红包数组
	uint64  clienttimestamp		= 4;	//客户端发包时间
	
}


/*********************夺宝*********************/
//宝物类型
enum e_TreasureType
{
	e_TreasureType_Quota = 0;	//定额
	e_TreasureType_Timer = 1;	//定时
}

//开奖方式
enum e_LotteryType
{
	e_LotteryType_AVERAGE	= 0;	//平均
	e_LotteryType_RANDOM	= 1;	//随机
}
//宝物状态
enum e_TreasureStatus
{
	e_TreasureStatus_Runing		= 0;	//夺宝进行中
	e_TreasureStatus_Opened		= 1;	//已开奖
	e_TreasureStatus_Timeout	= 2;	//已过期未开奖
	e_TreasureStatus_None		= 99;	//无（状态变更使用）
}

//夺宝参与信息
message CMDUesrTreasureBuyInfo
{
	UserInfo_t buy_user	= 1;
	uint32 buy_num		= 2;
}

enum e_UserRange
{
	e_UserRange_All		= 0;	//所有人
	e_UserRange_Member	= 1;	//仅成员
	e_UserRange_Visitor	= 2;	//仅游客
}

//宝物信息
message CMDTreasureInfo
{
	uint32 treasure_id		= 1;		//宝物id
	uint32 groupid			= 2;		//群id
	UserInfo_t user			= 3;		//发起者信息
	e_UserRange	join_range	= 4;		//参与范围
	e_TreasureType treasure_type = 5;	//宝物类型
	uint32 treasure_amount	= 6;		//定额宝物价值（单位：分）（e_TreasureType_Quota使用）
	uint32 treasure_time	= 7;		//定时宝物开奖时间（e_TreasureType_Timer使用）
	e_LotteryType lottery_type = 8;		//开奖方式
	uint32 winner_num		= 9;		//得奖人数
	string message			= 10;		//描述
	uint32 create_time		= 11;		//发起时间
	CMDTreasureExtraInfo ext = 12;		//附加信息
}

//宝物附加信息
message CMDTreasureExtraInfo
{
	uint32 buy_people		= 1;	//购买人数
	uint32 buy_amount		= 2;	//已购买金额（单位：分）
	e_TreasureStatus status = 3;	//状态
	uint32 finished_time	= 4;	//结束时间（开奖时间 or 过期时间）
	CMDUesrTreasureBuyInfo	my_buy	= 5;	//我购买的
	repeated CMDUesrTreasureBuyInfo buyers = 6;	//购买名单（如果有人购买）
	repeated CMDUesrTreasureBuyInfo winners = 7; //中奖名单（如果已开奖）
}

//单次购买所获取的夺宝编码（begin ~ end）
message CMDBuyCodeRange
{
	uint32 buy_time	= 1;	//购买时间（时间戳）
	uint32 begin	= 2;	//开始夺宝编码
	uint32 end		= 3;	//结束夺宝编码
}

//Sub_Vchat_SponsorTreasureReq = 4021，发起夺宝
message CMDSponsorTreasureReq
{
	CMDTreasureInfo info = 1;
}

//Sub_Vchat_SponsorTreasureResp	= 4022，发起夺宝反馈
message CMDSponsorTreasureResp
{
	CMDErrCode errinfo = 1;		//错误信息
	CMDTreasureInfo info = 2;	//请求信息
}

//Sub_Vchat_BuyTreasure = 4023，参与夺宝
message CMDBuyTreasure
{
	uint32 groupid  = 1;	//群id
	uint32 userid	= 2;	//用户id
	uint32 treasure_id	= 3;	//宝物id
	uint32 buy_amount	= 4;	//购买金额（单位：分）
}

//Sub_Vchat_BuyTreasureResp	= 4024，夺宝反馈
message CMDBuyTreasureResp
{
	CMDErrCode errinfo		= 1;	//错误信息，0 成功，其他 失败
	CMDBuyTreasure buy_info	= 2;	//本次购买信息
	CMDBuyCodeRange buy_code = 3;	//本次夺宝编码列表
}

//Sub_Vchat_QryMyTreasureDetail = 4025，请求我的夺宝详情
message CMDQryMyTreasureDetail
{
	uint32 userid	= 1;	//用户id
	uint32 groupid	= 2;	//群id
	uint32 treasure_id = 3;	//宝物id
}

//Sub_Vchat_MyTreasureDetail = 4026，我的夺宝详情
message CMDMyTreasureDetail
{
	uint32 userid		= 1;	//用户id
	uint32 groupid		= 2;	//群id
	uint32 treasure_id	= 3;	//宝物id
	uint32 buy_total	= 4;	//总共买了多少份
	repeated CMDBuyCodeRange buy_list = 5;  //我的夺宝编码列表
}

//Sub_Vchat_QryGroupTreasureList = 4027，查询群夺宝列表
//Sub_Vchat_QryMyTreasureList = 4029，查询我的夺宝列表
message CMDQryTreasureList
{
	uint32 groupid	= 1;	//群id
	uint32 userid	= 2;	//用户id
	uint32 count	= 3;	//请求个数
	uint32 last_create_time = 4;	//传前一次查询最后一个create_time
	uint32 last_end_time = 5;	//传前一次查询最后一个end_time
}

//Sub_Vchat_GroupTreasureList = 4028，群夺宝列表反馈
//Sub_Vchat_MyTreasureList = 4030，我的夺宝列表反馈
message CMDTreasureList
{
	uint32 groupid	= 1;	//群id
	uint32 userid	= 2;	//用户id
	repeated CMDTreasureInfo list	= 3;	//宝物列表
}

//Sub_Vchat_TreasureInfoNotify = 4031，宝物状态变更通知
message CMDTreasureInfoNotify
{
	e_TreasureStatus old_status	= 1;	//旧状态（新发布为e_TreasureStatus_None）
	e_TreasureStatus new_status	= 2;	//新状态
	CMDTreasureInfo info		= 3;	//宝物信息
}

//Sub_Vchat_QryTreasureInfo = 4032，查询宝物信息
message CMDQryTreasureInfo
{
	uint32 groupid	= 1;	//群id
	uint32 userid	= 2;	//用户id
	uint32 treasure_id	= 3;	//宝物id
}

//Sub_Vchat_QryTreasureInfoResp = 4033，查询宝物信息反馈
message CMDQryTreasureInfoResp
{
	CMDErrCode errinfo		= 1;	//查询结果
	CMDQryTreasureInfo req	= 2;	//请求信息
	CMDTreasureInfo info	= 3;	//宝物信息
}

/*********************夺宝*********************/
/*********************印章*********************/
//Sub_Vchat_SendPressStampReq = 4041, 用户盖印章请求
message CMDSendPressStampReq
{
	uint32	userID			= 1;	//用户ID
	uint32	groupID			= 2;	//群ID	
	uint32	dstUserID		= 3;	//被盖印章userid	
	uint32	Money				= 4;	//印章金额(实际金额*100)  
	string	message			= 5;	//印章内容		
	
}

//Sub_Vchat_SendPressStampResp = 4042, 用户盖印章反馈
message CMDSendPressStampResp
{
	CMDErrCode errInfo	= 1;	//ERROR CODE  0-SUCCESS
	uint32	userID			= 2;	//用户ID
	uint32	groupID			= 3;	//群ID
	uint32	stampID			= 4;	//印章ID	
}


//Sub_Vchat_QryStampReq = 4043,  查询印章
message CMDQryStampReq
{
	uint32  groupID		= 1;    //群ID	
	uint32  userID		= 2;    //用户ID	
  uint32  dstUserID   = 3;    //被盖印章userid
}

message CMDStampInfo
{
	uint32  stampID			= 1;  //印章ID
	uint32	userID			= 2;	//用户ID	
	uint32	dstUserID		= 3;	//被盖印章userid	
	uint32  pressNum		=	4;	//印章被按次数
	uint32	Money				= 5;	//印章当前金额(实际金额*100)  
	string	message			= 6;	//印章内容	
}

//Sub_Vchat_QryStampRsp = 4044, 返回印章
message CMDQryStampRsp
{
	uint32  groupID				= 1;	//群ID
	uint32  startMoney			=	2;	//起拍价
	uint32  IncreaseMoney			=	3;	//每次加价不低于元		
	repeated CMDStampInfo stamp	= 4;	//印章数组
}
/*********************印章*********************/
